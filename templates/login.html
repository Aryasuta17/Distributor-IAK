<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Login ‚Äî PT Ikan Terbang Makmur Sejahtera</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
    :root{
        --primary-blue:#007BFF;
        --dark-blue:#0056b3;
        --light-blue:#5ea3ff;
        --white:#FFFFFF;
        --text-dark:#495057;
        --text-muted:#6c757d;
        --bg-light:#f8f9fa;
        --border:#e0e0e0;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Poppins',system-ui,sans-serif}
    body{
        background:linear-gradient(135deg, var(--primary-blue) 0%, var(--dark-blue) 100%);
        color:var(--text-dark);display:grid;place-items:center;padding:24px
    }
    .card{
        width:min(680px,92vw);
        background:var(--white);
        border:1px solid var(--border);
        border-radius:20px;
        box-shadow:0 30px 80px rgba(0,0,0,0.15), 0 10px 30px rgba(0,0,0,0.1);
        padding:40px 40px 35px;
        transform:translateY(10px) scale(.98);
        opacity:0;animation:rise .7s cubic-bezier(.2,.7,.2,1) .1s forwards
    }
    h1{margin:0 0 10px;font-size:42px;color:var(--primary-blue);font-weight:800}
    .sub{color:var(--text-muted);margin-bottom:30px;font-size:16px;font-weight:600}
    label{display:block;font-size:14px;color:var(--text-dark);margin:20px 0 10px;font-weight:700}
    .input{position:relative;border-radius:12px}
    .input input{
        width:100%;padding:16px 48px 16px 16px;border-radius:12px;
        border:2px solid var(--border);background:var(--bg-light);color:var(--text-dark);outline:none;
        transition:.25s border-color,.25s box-shadow,.25s transform;font-size:16px;font-weight:600;
        font-family:'Poppins',sans-serif
    }
    .input input:focus{
        border-color:var(--primary-blue);
        box-shadow:0 0 0 4px rgba(0,123,255,0.15);
        transform:translateY(-2px);
        background:var(--white)
    }
    .input input::placeholder{color:#999;font-weight:500}
    .input .icon{position:absolute;right:16px;top:50%;transform:translateY(-50%);font-size:20px}
    .btn{
        width:100%;padding:18px 20px;margin-top:25px;border:0;border-radius:12px;
        background:linear-gradient(135deg,var(--primary-blue),var(--dark-blue));
        color:var(--white);font-weight:800;cursor:pointer;font-size:17px;
        transition:.25s transform,.25s box-shadow;
        box-shadow:0 8px 24px rgba(0,123,255,0.3);
        font-family:'Poppins',sans-serif
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 12px 32px rgba(0,123,255,0.4)}
    .btn:active{transform:translateY(0)}
    .btn:disabled{opacity:.65;cursor:not-allowed;filter:saturate(.7)}
    .msg{min-height:20px;margin-top:15px;font-size:14px;font-weight:600}.err{color:#dc3545}.ok{color:#28a745}
    .brand{display:flex;align-items:center;gap:12px;margin-bottom:15px}
    .brand-badge{
        width:52px;height:52px;border-radius:14px;
        background:linear-gradient(135deg,var(--primary-blue),var(--dark-blue));
        display:grid;place-items:center;font-weight:900;color:var(--white);
        box-shadow:0 8px 24px rgba(0,123,255,0.35);font-size:18px
    }
    .brand-title{font-weight:800;letter-spacing:.05rem;color:var(--primary-blue);font-size:18px}
    .brand-sub{color:var(--text-muted);font-size:13px;margin-top:3px;font-weight:600}

    /* Back-to-Home Button */
    .back-btn{
        position:fixed;left:20px;top:20px;z-index:10;
        display:inline-flex;align-items:center;gap:12px;
        padding:12px 20px;border-radius:999px;
        color:var(--primary-blue);text-decoration:none;font-weight:700;
        background:var(--white);
        border:2px solid var(--primary-blue);
        transition:.25s transform,.25s box-shadow;
        box-shadow:0 8px 24px rgba(0,123,255,0.25);
    }
    .back-btn:hover{
        transform:translateY(-3px);
        box-shadow:0 12px 32px rgba(0,123,255,0.4);
        background:var(--primary-blue);
        color:var(--white);
    }
    .back-btn:hover .back-ico{
        background:var(--white);
        color:var(--primary-blue);
    }
    .back-ico{
        width:32px;height:32px;border-radius:999px;
        display:grid;place-items:center;font-size:16px;font-weight:900;
        color:var(--white);
        background:linear-gradient(135deg,var(--primary-blue),var(--dark-blue));
        box-shadow:0 4px 12px rgba(0,123,255,0.3);
        transition:.25s all;
    }
    .back-text{letter-spacing:.02rem}

    @keyframes rise{to{transform:none;opacity:1}}
    </style>
    </head>
    <body>

    <!-- Tombol kembali -->
    <a class="back-btn" href="/" onclick="return goHome(event)" aria-label="Kembali ke Beranda">
    <span class="back-ico">‚Üê</span>
    <span class="back-text">Kembali ke Beranda</span>
    </a>

    <div class="card">
    <div class="brand">
        <div class="brand-badge">IAK</div>
        <div>
        <div class="brand-title">PT Ikan Terbang Makmur Sejahtera Tbk</div>
        <div class="brand-sub">Admin Dashboard Login</div>
        </div>
    </div>

    <h1>Welcome Back!</h1>
    <div class="sub">Masuk dengan <b>Nama</b> dan <b>Password</b> yang terdaftar.</div>

    <label>Nama</label>
    <div class="input">
        <input id="name" type="text" placeholder="mis. admin1" autocomplete="username">
        <span class="icon">üë§</span>
    </div>

    <label>Password</label>
    <div class="input">
        <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
        <span class="icon">üîí</span>
    </div>

    <button id="loginBtn" class="btn">Sign in</button>
    <div id="msg" class="msg"></div>
    </div>

    <script>
    // util
    const $ = id => document.getElementById(id);
    const setMsg = (t, ok=false) => {
        const el=$("msg"); el.className="msg "+(ok?"ok":"err"); el.textContent=t||"";
    };

    // field interactions
    ["name","password"].forEach(id=>{
        $(id).addEventListener("keydown", e=>{ if(e.key==="Enter") $("loginBtn").click(); });
    });

    // login handler
    $("loginBtn").addEventListener("click", async ()=>{
        setMsg(""); $("loginBtn").disabled = true;
        const name = $("name").value.trim(), password = $("password").value;
        try{
        const r = await fetch("/session-login", {
            method:"POST", headers:{"Content-Type":"application/json"},
            body:JSON.stringify({name,password})
        });
        const data = await r.json();
        if(r.ok && data.status==="success"){
            setMsg("Login berhasil. Mengalihkan‚Ä¶", true);
            location.href="/admin";
        } else {
            setMsg(data.message || "Login gagal.");
        }
        }catch(e){ setMsg("Kesalahan jaringan."); }
        finally{ $("loginBtn").disabled = false; }
    });

    // URL beranda (Flask)
    const HOME_URL = "{{ url_for('index') }}"; // ganti 'index' dengan nama view berandamu bila berbeda

    function goHome(e){
    if (e) e.preventDefault();
    // hapus halaman sekarang dari riwayat supaya tombol Back tidak kembali ke sini
    location.replace(HOME_URL || "/");
    return false;
    }

    // Shortcut: ESC kembali ke beranda
    window.addEventListener("keydown", e => { if (e.key === "Escape") goHome(e); });

</script>
</body>
</html>